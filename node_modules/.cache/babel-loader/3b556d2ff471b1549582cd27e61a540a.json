{"ast":null,"code":"var _jsxFileName = \"/Users/im_jacamo/Documents/General-Assembly/code/Homework-Deliverables/Project/Project-Wayfare/wayfarer-ABJJ/src/components/DynamicForm.js\";\nimport React from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass DynamicForm extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      title: '',\n      body: '',\n      city: '',\n      currentCity: '',\n      new: true\n    };\n\n    this.handleChange = event => {\n      this.setState({\n        [event.target.id]: event.target.value\n      });\n      console.log(this.state);\n    };\n\n    this.handleSubmit = event => {\n      event.preventDefault();\n      const requestBody = {\n        city: this.state.city,\n        title: this.state.title,\n        body: this.state.body\n      };\n      console.log(`request body: ${requestBody}`);\n\n      if (requestBody.city && requestBody.title.length > 0 && requestBody.title.length < 200 && requestBody.body) {\n        console.log(`all true!`);\n\n        if (this.state.new) {\n          fetch('https://abjj-wayfarer-api.herokuapp.com/post/', {\n            method: 'post',\n            // enctype: 'multipart/form-data',\n            headers: {\n              'Content-Type': 'application/json'\n            },\n            body: JSON.stringify(requestBody)\n          }).then(response => {\n            // console.log(response)\n            return response.json();\n          }).then(jsonData => {// console.log(jsonData)\n          }).then(this.props.updatePosts).catch(err => {\n            throw err;\n          }).then(this.props.closeForm);\n        } else {\n          requestBody._id = this.props.post;\n          fetch('https://abjj-wayfarer-api.herokuapp.com/post/', {\n            method: 'put',\n            // enctype: 'multipart/form-data',\n            headers: {\n              'Content-Type': 'application/json'\n            },\n            body: JSON.stringify(requestBody)\n          }).then(response => {\n            // console.log(response)\n            return response.json();\n          }).then(jsonData => {// console.log(jsonData)\n          }).then(this.props.updatePosts).catch(err => {\n            throw err;\n          }).then(this.props.closeForm);\n        }\n      } else {\n        if (!requestBody.city) {\n          alert('Missing City!');\n        } else if (requestBody.title.length < 1) {\n          alert('Post must include a title');\n        } else if (requestBody.title.length > 200) {\n          alert('Title too long');\n        } else if (!requestBody.body) {\n          alert('Post must include a body');\n        } else {\n          alert('Unknown Error');\n        }\n      }\n    };\n  }\n\n  componentDidMount() {\n    if (this.props.edit) {\n      this.setState({\n        new: false\n      });\n      fetch(`https://abjj-wayfarer-api.herokuapp.com/post/${this.props.post}`).then(res => res.json()).then(jsonData => {\n        this.setState({\n          city: jsonData.city,\n          title: jsonData.title,\n          body: jsonData.body\n        });\n      });\n      fetch(`https://abjj-wayfarer-api.herokuapp.com/city/${this.props.city}`).then(res => res.json()).then(jsonData => {\n        this.setState({\n          currentCity: jsonData\n        });\n      });\n    } else {\n      this.setState({\n        currentCity: this.props.currentCity,\n        city: this.props.currentCity._id\n      });\n    }\n  }\n\n  render() {\n    if (this.state.new) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mymodal\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mymodalcontent\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"create-editTitle\",\n            children: [\"Create a New Post for \", this.state.currentCity.name]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n            onSubmit: this.handleSubmit,\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mb-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"title\",\n                className: \"form-label\",\n                children: \"Title\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 100,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                className: \"form-control\",\n                id: \"title\",\n                name: \"title\",\n                placeholder: \"Where did you go?\",\n                onChange: this.handleChange\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 101,\n                columnNumber: 29\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 99,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mb-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"body\",\n                className: \"form-label\",\n                children: \"Body\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 111,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n                className: \"form-control\",\n                onChange: this.handleChange,\n                name: \"body\",\n                id: \"body\",\n                rows: \"3\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 112,\n                columnNumber: 29\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 110,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              class: \"col-auto\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"submit\",\n                className: \"btn btn-primary mb-3 create-editBtn\",\n                children: \"Submit\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 121,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: this.props.closeForm,\n                className: \"btn btn-primary mb-3 create-editClose\",\n                children: \"Close\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 122,\n                columnNumber: 29\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 120,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 17\n      }, this);\n    } else {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mymodal\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mymodalcontent\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"create-editTitle\",\n            children: [\"Edit Post on \", this.state.currentCity.name]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 132,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n            onSubmit: this.handleSubmit,\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mb-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"title\",\n                className: \"form-label\",\n                children: \"Title\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 135,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                className: \"form-control\",\n                id: \"title\",\n                name: \"title\",\n                placeholder: \"Where did you go?\",\n                onChange: this.handleChange,\n                value: this.state.title\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 136,\n                columnNumber: 25\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 134,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mb-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"body\",\n                className: \"form-label\",\n                children: \"Body\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 147,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n                className: \"form-control\",\n                onChange: this.handleChange,\n                value: this.state.body,\n                name: \"body\",\n                id: \"body\",\n                rows: \"3\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 148,\n                columnNumber: 25\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 146,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              class: \"col-auto\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"submit\",\n                className: \"btn btn-primary mb-3 create-editBtn\",\n                children: \"Submit\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 158,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: this.props.closeForm,\n                className: \"btn btn-primary mb-3 create-editClose\",\n                children: \"Close\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 159,\n                columnNumber: 25\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 157,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 133,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 17\n      }, this);\n    }\n  }\n\n}\n\nexport default DynamicForm;","map":{"version":3,"sources":["/Users/im_jacamo/Documents/General-Assembly/code/Homework-Deliverables/Project/Project-Wayfare/wayfarer-ABJJ/src/components/DynamicForm.js"],"names":["React","DynamicForm","Component","state","title","body","city","currentCity","new","handleChange","event","setState","target","id","value","console","log","handleSubmit","preventDefault","requestBody","length","fetch","method","headers","JSON","stringify","then","response","json","jsonData","props","updatePosts","catch","err","closeForm","_id","post","alert","componentDidMount","edit","res","render","name"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;;;AAEA,MAAMC,WAAN,SAA0BD,KAAK,CAACE,SAAhC,CAA0C;AAAA;AAAA;AAAA,SACxCC,KADwC,GAChC;AACNC,MAAAA,KAAK,EAAE,EADD;AAENC,MAAAA,IAAI,EAAE,EAFA;AAGNC,MAAAA,IAAI,EAAE,EAHA;AAINC,MAAAA,WAAW,EAAE,EAJP;AAKNC,MAAAA,GAAG,EAAE;AALC,KADgC;;AAAA,SA4BxCC,YA5BwC,GA4BxBC,KAAD,IAAW;AACxB,WAAKC,QAAL,CAAc;AAAC,SAACD,KAAK,CAACE,MAAN,CAAaC,EAAd,GAAmBH,KAAK,CAACE,MAAN,CAAaE;AAAjC,OAAd;AACAC,MAAAA,OAAO,CAACC,GAAR,CAAY,KAAKb,KAAjB;AACD,KA/BuC;;AAAA,SAiCxCc,YAjCwC,GAiCxBP,KAAD,IAAW;AACxBA,MAAAA,KAAK,CAACQ,cAAN;AACA,YAAMC,WAAW,GAAG;AAClBb,QAAAA,IAAI,EAAE,KAAKH,KAAL,CAAWG,IADC;AAElBF,QAAAA,KAAK,EAAE,KAAKD,KAAL,CAAWC,KAFA;AAGlBC,QAAAA,IAAI,EAAE,KAAKF,KAAL,CAAWE;AAHC,OAApB;AAKAU,MAAAA,OAAO,CAACC,GAAR,CAAa,iBAAgBG,WAAY,EAAzC;;AACA,UAAIA,WAAW,CAACb,IAAZ,IAAqBa,WAAW,CAACf,KAAZ,CAAkBgB,MAAlB,GAA2B,CAAhD,IAAuDD,WAAW,CAACf,KAAZ,CAAkBgB,MAAlB,GAA2B,GAAlF,IAA0FD,WAAW,CAACd,IAA1G,EAAgH;AAC9GU,QAAAA,OAAO,CAACC,GAAR,CAAa,WAAb;;AACA,YAAI,KAAKb,KAAL,CAAWK,GAAf,EAAoB;AAClBa,UAAAA,KAAK,CAAC,+CAAD,EAAkD;AACrDC,YAAAA,MAAM,EAAE,MAD6C;AAErD;AACAC,YAAAA,OAAO,EAAE;AACP,8BAAgB;AADT,aAH4C;AAMrDlB,YAAAA,IAAI,EAAEmB,IAAI,CAACC,SAAL,CAAeN,WAAf;AAN+C,WAAlD,CAAL,CAOGO,IAPH,CAOSC,QAAD,IAAc;AAAE;AACtB,mBAAOA,QAAQ,CAACC,IAAT,EAAP;AACD,WATD,EASGF,IATH,CASSG,QAAD,IAAc,CAAE;AACvB,WAVD,EAUGH,IAVH,CAUQ,KAAKI,KAAL,CAAWC,WAVnB,EAUgCC,KAVhC,CAUuCC,GAAD,IAAS;AAC7C,kBAAMA,GAAN;AACD,WAZD,EAYGP,IAZH,CAYQ,KAAKI,KAAL,CAAWI,SAZnB;AAaD,SAdD,MAcO;AACLf,UAAAA,WAAW,CAACgB,GAAZ,GAAkB,KAAKL,KAAL,CAAWM,IAA7B;AACAf,UAAAA,KAAK,CAAC,+CAAD,EAAkD;AACrDC,YAAAA,MAAM,EAAE,KAD6C;AAErD;AACAC,YAAAA,OAAO,EAAE;AACP,8BAAgB;AADT,aAH4C;AAMrDlB,YAAAA,IAAI,EAAEmB,IAAI,CAACC,SAAL,CAAeN,WAAf;AAN+C,WAAlD,CAAL,CAOGO,IAPH,CAOSC,QAAD,IAAc;AAAE;AACtB,mBAAOA,QAAQ,CAACC,IAAT,EAAP;AACD,WATD,EASGF,IATH,CASSG,QAAD,IAAc,CAAE;AACvB,WAVD,EAUGH,IAVH,CAUQ,KAAKI,KAAL,CAAWC,WAVnB,EAUgCC,KAVhC,CAUuCC,GAAD,IAAS;AAC7C,kBAAMA,GAAN;AACD,WAZD,EAYGP,IAZH,CAYQ,KAAKI,KAAL,CAAWI,SAZnB;AAaD;AACF,OAhCD,MAgCO;AACL,YAAI,CAAEf,WAAW,CAACb,IAAlB,EAAwB;AACtB+B,UAAAA,KAAK,CAAC,eAAD,CAAL;AACD,SAFD,MAEO,IAAIlB,WAAW,CAACf,KAAZ,CAAkBgB,MAAlB,GAA2B,CAA/B,EAAkC;AACvCiB,UAAAA,KAAK,CAAC,2BAAD,CAAL;AACD,SAFM,MAEA,IAAIlB,WAAW,CAACf,KAAZ,CAAkBgB,MAAlB,GAA2B,GAA/B,EAAoC;AACzCiB,UAAAA,KAAK,CAAC,gBAAD,CAAL;AACD,SAFM,MAEA,IAAI,CAAElB,WAAW,CAACd,IAAlB,EAAwB;AAC7BgC,UAAAA,KAAK,CAAC,0BAAD,CAAL;AACD,SAFM,MAEA;AACLA,UAAAA,KAAK,CAAC,eAAD,CAAL;AACD;AACF;AACF,KAtFuC;AAAA;;AASxCC,EAAAA,iBAAiB,GAAG;AAClB,QAAI,KAAKR,KAAL,CAAWS,IAAf,EAAqB;AACnB,WAAK5B,QAAL,CAAc;AAACH,QAAAA,GAAG,EAAE;AAAN,OAAd;AACAa,MAAAA,KAAK,CAAE,gDACL,KAAKS,KAAL,CAAWM,IACZ,EAFI,CAAL,CAEIV,IAFJ,CAEUc,GAAD,IAASA,GAAG,CAACZ,IAAJ,EAFlB,EAE8BF,IAF9B,CAEoCG,QAAD,IAAc;AAC/C,aAAKlB,QAAL,CAAc;AAACL,UAAAA,IAAI,EAAEuB,QAAQ,CAACvB,IAAhB;AAAsBF,UAAAA,KAAK,EAAEyB,QAAQ,CAACzB,KAAtC;AAA6CC,UAAAA,IAAI,EAAEwB,QAAQ,CAACxB;AAA5D,SAAd;AACD,OAJD;AAKAgB,MAAAA,KAAK,CAAE,gDACL,KAAKS,KAAL,CAAWxB,IACZ,EAFI,CAAL,CAEIoB,IAFJ,CAEUc,GAAD,IAASA,GAAG,CAACZ,IAAJ,EAFlB,EAE8BF,IAF9B,CAEoCG,QAAD,IAAc;AAC/C,aAAKlB,QAAL,CAAc;AAACJ,UAAAA,WAAW,EAAEsB;AAAd,SAAd;AACD,OAJD;AAKD,KAZD,MAYO;AACL,WAAKlB,QAAL,CAAc;AAACJ,QAAAA,WAAW,EAAE,KAAKuB,KAAL,CAAWvB,WAAzB;AAAsCD,QAAAA,IAAI,EAAE,KAAKwB,KAAL,CAAWvB,WAAX,CAAuB4B;AAAnE,OAAd;AACD;AAEF;;AA8DDM,EAAAA,MAAM,GAAG;AAEH,QAAI,KAAKtC,KAAL,CAAWK,GAAf,EAAoB;AAChB,0BACI;AAAK,QAAA,SAAS,EAAC,SAAf;AAAA,+BACI;AAAK,UAAA,SAAS,EAAC,gBAAf;AAAA,kCACA;AAAI,YAAA,SAAS,EAAC,kBAAd;AAAA,iDAAwD,KAAKL,KAAL,CAAWI,WAAX,CAAuBmC,IAA/E;AAAA;AAAA;AAAA;AAAA;AAAA,kBADA,eAEI;AAAM,YAAA,QAAQ,EAAE,KAAKzB,YAArB;AAAA,oCACA;AAAK,cAAA,SAAS,EAAC,MAAf;AAAA,sCACI;AAAO,gBAAA,OAAO,EAAC,OAAf;AAAuB,gBAAA,SAAS,EAAC,YAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBADJ,eAEI;AACI,gBAAA,IAAI,EAAC,MADT;AAEI,gBAAA,SAAS,EAAC,cAFd;AAGI,gBAAA,EAAE,EAAC,OAHP;AAII,gBAAA,IAAI,EAAC,OAJT;AAKI,gBAAA,WAAW,EAAC,mBALhB;AAMI,gBAAA,QAAQ,EAAE,KAAKR;AANnB;AAAA;AAAA;AAAA;AAAA,sBAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,oBADA,eAYA;AAAK,cAAA,SAAS,EAAC,MAAf;AAAA,sCACI;AAAO,gBAAA,OAAO,EAAC,MAAf;AAAsB,gBAAA,SAAS,EAAC,YAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBADJ,eAEI;AACI,gBAAA,SAAS,EAAC,cADd;AAEI,gBAAA,QAAQ,EAAE,KAAKA,YAFnB;AAGI,gBAAA,IAAI,EAAC,MAHT;AAII,gBAAA,EAAE,EAAC,MAJP;AAKI,gBAAA,IAAI,EAAC;AALT;AAAA;AAAA;AAAA;AAAA,sBAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,oBAZA,eAsBA;AAAK,cAAA,KAAK,EAAC,UAAX;AAAA,sCACI;AAAQ,gBAAA,IAAI,EAAC,QAAb;AAAsB,gBAAA,SAAS,EAAC,qCAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBADJ,eAEI;AAAQ,gBAAA,OAAO,EAAE,KAAKqB,KAAL,CAAWI,SAA5B;AAAuC,gBAAA,SAAS,EAAC,uCAAjD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,oBAtBA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAFJ;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,cADJ;AAkCH,KAnCD,MAmCO;AACH,0BACI;AAAK,QAAA,SAAS,EAAC,SAAf;AAAA,+BACA;AAAK,UAAA,SAAS,EAAC,gBAAf;AAAA,kCACA;AAAI,YAAA,SAAS,EAAC,kBAAd;AAAA,wCAA+C,KAAK/B,KAAL,CAAWI,WAAX,CAAuBmC,IAAtE;AAAA;AAAA;AAAA;AAAA;AAAA,kBADA,eAEI;AAAM,YAAA,QAAQ,EAAE,KAAKzB,YAArB;AAAA,oCACA;AAAK,cAAA,SAAS,EAAC,MAAf;AAAA,sCACI;AAAO,gBAAA,OAAO,EAAC,OAAf;AAAuB,gBAAA,SAAS,EAAC,YAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBADJ,eAEI;AACI,gBAAA,IAAI,EAAC,MADT;AAEI,gBAAA,SAAS,EAAC,cAFd;AAGI,gBAAA,EAAE,EAAC,OAHP;AAII,gBAAA,IAAI,EAAC,OAJT;AAKI,gBAAA,WAAW,EAAC,mBALhB;AAMI,gBAAA,QAAQ,EAAE,KAAKR,YANnB;AAOI,gBAAA,KAAK,EAAE,KAAKN,KAAL,CAAWC;AAPtB;AAAA;AAAA;AAAA;AAAA,sBAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,oBADA,eAaA;AAAK,cAAA,SAAS,EAAC,MAAf;AAAA,sCACI;AAAO,gBAAA,OAAO,EAAC,MAAf;AAAsB,gBAAA,SAAS,EAAC,YAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBADJ,eAEI;AACI,gBAAA,SAAS,EAAC,cADd;AAEI,gBAAA,QAAQ,EAAE,KAAKK,YAFnB;AAGI,gBAAA,KAAK,EAAE,KAAKN,KAAL,CAAWE,IAHtB;AAII,gBAAA,IAAI,EAAC,MAJT;AAKI,gBAAA,EAAE,EAAC,MALP;AAMI,gBAAA,IAAI,EAAC;AANT;AAAA;AAAA;AAAA;AAAA,sBAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,oBAbA,eAwBA;AAAK,cAAA,KAAK,EAAC,UAAX;AAAA,sCACI;AAAQ,gBAAA,IAAI,EAAC,QAAb;AAAsB,gBAAA,SAAS,EAAC,qCAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBADJ,eAEI;AAAQ,gBAAA,OAAO,EAAE,KAAKyB,KAAL,CAAWI,SAA5B;AAAuC,gBAAA,SAAS,EAAC,uCAAjD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,oBAxBA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAFJ;AAAA;AAAA;AAAA;AAAA;AAAA;AADA;AAAA;AAAA;AAAA;AAAA,cADJ;AAoCH;AACJ;;AAnKqC;;AAqK1C,eAAejC,WAAf","sourcesContent":["import React from 'react'\n\nclass DynamicForm extends React.Component {\n  state = {\n    title: '',\n    body: '',\n    city: '',\n    currentCity: '',\n    new: true\n  }\n\n  componentDidMount() {\n    if (this.props.edit) {\n      this.setState({new: false})\n      fetch(`https://abjj-wayfarer-api.herokuapp.com/post/${\n        this.props.post\n      }`).then((res) => res.json()).then((jsonData) => {\n        this.setState({city: jsonData.city, title: jsonData.title, body: jsonData.body})\n      })\n      fetch(`https://abjj-wayfarer-api.herokuapp.com/city/${\n        this.props.city\n      }`).then((res) => res.json()).then((jsonData) => {\n        this.setState({currentCity: jsonData})\n      })\n    } else {\n      this.setState({currentCity: this.props.currentCity, city: this.props.currentCity._id})\n    }\n\n  }\n\n  handleChange = (event) => {\n    this.setState({[event.target.id]: event.target.value})\n    console.log(this.state)\n  }\n\n  handleSubmit = (event) => {\n    event.preventDefault()\n    const requestBody = {\n      city: this.state.city,\n      title: this.state.title,\n      body: this.state.body\n    }\n    console.log(`request body: ${requestBody}`)\n    if (requestBody.city && (requestBody.title.length > 0) && (requestBody.title.length < 200) && requestBody.body) {\n      console.log(`all true!`)\n      if (this.state.new) {\n        fetch('https://abjj-wayfarer-api.herokuapp.com/post/', {\n          method: 'post',\n          // enctype: 'multipart/form-data',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify(requestBody)\n        }).then((response) => { // console.log(response)\n          return response.json()\n        }).then((jsonData) => { // console.log(jsonData)\n        }).then(this.props.updatePosts).catch((err) => {\n          throw err\n        }).then(this.props.closeForm)\n      } else {\n        requestBody._id = this.props.post\n        fetch('https://abjj-wayfarer-api.herokuapp.com/post/', {\n          method: 'put',\n          // enctype: 'multipart/form-data',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify(requestBody)\n        }).then((response) => { // console.log(response)\n          return response.json()\n        }).then((jsonData) => { // console.log(jsonData)\n        }).then(this.props.updatePosts).catch((err) => {\n          throw err\n        }).then(this.props.closeForm)\n      }\n    } else {\n      if (! requestBody.city) {\n        alert('Missing City!')\n      } else if (requestBody.title.length < 1) {\n        alert('Post must include a title')\n      } else if (requestBody.title.length > 200) {\n        alert('Title too long')\n      } else if (! requestBody.body) {\n        alert('Post must include a body')\n      } else {\n        alert('Unknown Error')\n      }\n    }\n  }\n\n  render() {\n\n        if (this.state.new) {\n            return(\n                <div className=\"mymodal\">\n                    <div className=\"mymodalcontent\">\n                    <h3 className=\"create-editTitle\">Create a New Post for {this.state.currentCity.name}</h3>\n                        <form onSubmit={this.handleSubmit}>\n                        <div className=\"mb-3\">\n                            <label htmlFor=\"title\" className=\"form-label\">Title</label>\n                            <input \n                                type=\"text\" \n                                className=\"form-control\" \n                                id=\"title\" \n                                name=\"title\" \n                                placeholder=\"Where did you go?\" \n                                onChange={this.handleChange}\n                            />\n                        </div>\n                        <div className=\"mb-3\">\n                            <label htmlFor=\"body\" className=\"form-label\">Body</label>\n                            <textarea \n                                className=\"form-control\" \n                                onChange={this.handleChange} \n                                name=\"body\" \n                                id=\"body\" \n                                rows=\"3\">\n                            </textarea>\n                        </div>\n                        <div class=\"col-auto\">\n                            <button type=\"submit\" className=\"btn btn-primary mb-3 create-editBtn\">Submit</button>\n                            <button onClick={this.props.closeForm} className=\"btn btn-primary mb-3 create-editClose\">Close</button>\n                        </div>\n                        </form>\n                    </div>\n                </div>\n            )\n        } else {\n            return(\n                <div className=\"mymodal\">\n                <div className=\"mymodalcontent\">\n                <h3 className=\"create-editTitle\">Edit Post on {this.state.currentCity.name}</h3>\n                    <form onSubmit={this.handleSubmit}>\n                    <div className=\"mb-3\">\n                        <label htmlFor=\"title\" className=\"form-label\">Title</label>\n                        <input \n                            type=\"text\" \n                            className=\"form-control\" \n                            id=\"title\"\n                            name=\"title\"\n                            placeholder=\"Where did you go?\" \n                            onChange={this.handleChange} \n                            value={this.state.title} \n                        />\n                    </div>\n                    <div className=\"mb-3\">\n                        <label htmlFor=\"body\" className=\"form-label\">Body</label>\n                        <textarea \n                            className=\"form-control\"\n                            onChange={this.handleChange}\n                            value={this.state.body} \n                            name=\"body\" \n                            id=\"body\" \n                            rows=\"3\">\n                        </textarea>\n                    </div>\n                    <div class=\"col-auto\">\n                        <button type=\"submit\" className=\"btn btn-primary mb-3 create-editBtn\">Submit</button>\n                        <button onClick={this.props.closeForm} className=\"btn btn-primary mb-3 create-editClose\">Close</button>\n                    </div>\n                    </form>\n                </div>\n            </div>\n            )\n        }\n    }\n}\nexport default DynamicForm\n"]},"metadata":{},"sourceType":"module"}